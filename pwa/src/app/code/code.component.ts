import { ChangeDetectionStrategy, Component, ElementRef, OnInit, ViewChild } from '@angular/core';
import { ActivatedRoute, Router } from '@angular/router';
import { off } from 'process';
import { Observable } from 'rxjs';
import { data } from './data';
import pako from 'pako';

declare const QRCode: any;

@Component({
  selector: 'app-code',
  templateUrl: './code.component.html',
  styleUrls: ['./code.component.scss'],
  changeDetection: ChangeDetectionStrategy.OnPush
})
export class CodeComponent implements OnInit {

  @ViewChild('container', { static: true }) codeContainer: ElementRef;
  currentCode = 1;
  totalCodes = 0;
  dataArray = [];
  codeInstance = null;
  qrCodeText = '123';
  constructor(
    private router: Router,
    private route: ActivatedRoute,

  ) { }

  ngOnInit(): void {
    const info: any = {
      text: `Schlumberger was founded in 1926 by two brothers Conrad and Marcel Schlumberger from the Alsace region in France as the Electric Prospecting Company (French: Société de prospection électrique). The company recorded the first-ever electrical resistivity well log in Merkwiller-Pechelbronn, France in 1927. Today, Schlumberger supplies the petroleum industry with services such as seismic acquisition and processing, formation evaluation, well testing and directional drilling, well cementing and stimulation, artificial lift, well completions, flow assurance and consulting, and software and information management. The company is also involved in the groundwater extraction[10] and carbon capture and storage industries.[11]`,
      chart: [5, 20, 36, 10, 10, 20],
      img: [
        `data:image/png;base64,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`
      ]
    };


    this.qrCodeText = btoa(pako.deflate(JSON.stringify(info), { to: 'string' }));

  }
  onExist(): void {
    this.router.navigate([`../dashboard`], { relativeTo: this.route });
  }
}
